package crawler_test

import (
	"testing"

	"github.com/capybara-alt/my-assemble/infrastructure/crawler"
	"github.com/capybara-alt/my-assemble/model"
	"github.com/stretchr/testify/assert"
)

func TestArmsFrameCrawler(t *testing.T) {
	test := struct {
		name string
		want model.Want[model.CrawlResultJSON]
	}{
		name: "[正常系]ARMS Frameページのクロールテスト",
		want: model.Want[model.CrawlResultJSON]{
			Value: model.CrawlResultJSON{
				string(model.ARMS_UNIT_TYPE): {
					"腕部パーツ": {
						"AA-J-123 BASHO": {
							"メーカー":     "BAWS",
							"価格":       "81,000",
							"レギュレーション": "1.03.1",
							"AP":       "2430",
							"耐弾防御":     "208 (-32)",
							"耐EN防御":    "191",
							"耐爆防御":     "225 (-35)",
							"腕部積載上限":   "10520",
							"反動制御":     "66",
							"射撃武器適性":   "53",
							"近接武器適性":   "158",
							"重量":       "10480",
							"EN負荷":     "210",
						},
						"AA-J-123/RC JAILBREAK": {
							"メーカー":     "BAWS",
							"価格":       "-",
							"レギュレーション": "1.03.1",
							"AP":       "1000",
							"耐弾防御":     "180 (-20)",
							"耐EN防御":    "190",
							"耐爆防御":     "215 (-20)",
							"腕部積載上限":   "10520",
							"反動制御":     "45",
							"射撃武器適性":   "45",
							"近接武器適性":   "112",
							"重量":       "8480",
							"EN負荷":     "210",
						},
						"AR-011 MELANDER": {
							"メーカー":     "ベイラム",
							"価格":       "95,000",
							"レギュレーション": "1.03.1",
							"AP":       "2260",
							"耐弾防御":     "247",
							"耐EN防御":    "217",
							"耐爆防御":     "234",
							"腕部積載上限":   "15100",
							"反動制御":     "120 (+13)",
							"射撃武器適性":   "100",
							"近接武器適性":   "96",
							"重量":       "13650",
							"EN負荷":     "265",
						},
						"AR-012 MELANDER C3": {
							"メーカー":     "ベイラム",
							"価格":       "-",
							"レギュレーション": "1.03.1",
							"AP":       "2010",
							"耐弾防御":     "239",
							"耐EN防御":    "212",
							"耐爆防御":     "233",
							"腕部積載上限":   "12000",
							"反動制御":     "102 (+10)",
							"射撃武器適性":   "128",
							"近接武器適性":   "102",
							"重量":       "12300",
							"EN負荷":     "232",
						},
						"DF-AR-08 TIAN-QIANG": {
							"メーカー":     "大豊",
							"価格":       "200,000",
							"レギュレーション": "1.03.1",
							"AP":       "2480",
							"耐弾防御":     "260",
							"耐EN防御":    "250",
							"耐爆防御":     "251",
							"腕部積載上限":   "19500",
							"反動制御":     "155 (+10)",
							"射撃武器適性":   "92",
							"近接武器適性":   "84",
							"重量":       "20020",
							"EN負荷":     "295",
						},
						"DF-AR-09 TIAN-LAO": {
							"メーカー":     "大豊",
							"価格":       "310,000",
							"レギュレーション": "1.03.1",
							"AP":       "3070",
							"耐弾防御":     "305",
							"耐EN防御":    "251",
							"耐爆防御":     "277",
							"腕部積載上限":   "17200",
							"反動制御":     "145 (+10)",
							"射撃武器適性":   "95",
							"近接武器適性":   "68",
							"重量":       "26740",
							"EN負荷":     "266",
						},
						"VP-46S": {
							"メーカー":     "アーキバス",
							"価格":       "177,000",
							"レギュレーション": "1.03.1",
							"AP":       "2240",
							"耐弾防御":     "231",
							"耐EN防御":    "252",
							"耐爆防御":     "218",
							"腕部積載上限":   "14520",
							"反動制御":     "116 (+10)",
							"射撃武器適性":   "102",
							"近接武器適性":   "92",
							"重量":       "14020",
							"EN負荷":     "278",
						},
						"VP-46D": {
							"メーカー":     "アーキバス",
							"価格":       "258,000",
							"レギュレーション": "1.03.1",
							"AP":       "1620",
							"耐弾防御":     "196",
							"耐EN防御":    "230",
							"耐爆防御":     "190",
							"腕部積載上限":   "11800",
							"反動制御":     "105 (+35)",
							"射撃武器適性":   "133",
							"近接武器適性":   "117",
							"重量":       "10990",
							"EN負荷":     "248",
						},
						"NACHTREIHER/46E": {
							"メーカー":     "シュナイダー",
							"価格":       "138,000",
							"レギュレーション": "1.03.1",
							"AP":       "1860",
							"耐弾防御":     "204",
							"耐EN防御":    "213",
							"耐爆防御":     "195",
							"腕部積載上限":   "12730",
							"反動制御":     "87 (+35)",
							"射撃武器適性":   "160",
							"近接武器適性":   "95",
							"重量":       "11420",
							"EN負荷":     "302",
						},
						"VE-46A": {
							"メーカー":     "アーキバス",
							"価格":       "286,000",
							"レギュレーション": "1.03.1",
							"AP":       "2660",
							"耐弾防御":     "262",
							"耐EN防御":    "270",
							"耐爆防御":     "257",
							"腕部積載上限":   "21300",
							"反動制御":     "170 (+10)",
							"射撃武器適性":   "80",
							"近接武器適性":   "76",
							"重量":       "22210",
							"EN負荷":     "380",
						},
						"AC-2000 TOOL ARM": {
							"メーカー":     "RaD",
							"価格":       "-",
							"レギュレーション": "1.03.1",
							"AP":       "1990",
							"耐弾防御":     "207",
							"耐EN防御":    "204",
							"耐爆防御":     "209",
							"腕部積載上限":   "13300",
							"反動制御":     "110 (+20)",
							"射撃武器適性":   "96",
							"近接武器適性":   "100",
							"重量":       "11300",
							"EN負荷":     "216",
						},
						"AC-3000 WRECKER": {
							"メーカー":   "RaD",
							"価格":     "79,000",
							"AP":     "2030",
							"耐弾防御":   "232",
							"耐EN防御":  "170",
							"耐爆防御":   "237",
							"腕部積載上限": "15800",
							"反動制御":   "232",
							"射撃武器適性": "23",
							"近接武器適性": "13",
							"重量":     "14650",
							"EN負荷":   "220",
						},
						"AS-5000 SALAD": {
							"メーカー":     "RaD",
							"価格":       "249,000",
							"レギュレーション": "1.03.1",
							"AP":       "2600",
							"耐弾防御":     "258",
							"耐EN防御":    "271",
							"耐爆防御":     "255",
							"腕部積載上限":   "18700",
							"反動制御":     "140 (+10)",
							"射撃武器適性":   "88",
							"近接武器適性":   "80",
							"重量":       "20940",
							"EN負荷":     "356",
						},
						"EL-TA-10 FIRMEZA": {
							"メーカー":     "エルカノ",
							"価格":       "227,000",
							"レギュレーション": "1.03.1",
							"AP":       "1900",
							"耐弾防御":     "210",
							"耐EN防御":    "214",
							"耐爆防御":     "187",
							"腕部積載上限":   "13540",
							"反動制御":     "111 (+25)",
							"射撃武器適性":   "122",
							"近接武器適性":   "110",
							"重量":       "11220",
							"EN負荷":     "270",
						},
						"EL-PA-00 ALBA": {
							"メーカー":     "エルカノ",
							"価格":       "266,000",
							"レギュレーション": "1.03.1",
							"AP":       "1750",
							"耐弾防御":     "205",
							"耐EN防御":    "205",
							"耐爆防御":     "205",
							"腕部積載上限":   "11350",
							"反動制御":     "101 (+32)",
							"射撃武器適性":   "136",
							"近接武器適性":   "85",
							"重量":       "9810",
							"EN負荷":     "315",
						},
						"04-101 MIND ALPHA": {
							"メーカー":     "オールマインド",
							"価格":       "272,000",
							"レギュレーション": "1.03.1",
							"AP":       "2300",
							"耐弾防御":     "245",
							"耐EN防御":    "260",
							"耐爆防御":     "246",
							"腕部積載上限":   "15550",
							"反動制御":     "142 (+10)",
							"射撃武器適性":   "103",
							"近接武器適性":   "79",
							"重量":       "16960",
							"EN負荷":     "358",
						},
						"IA-C01A: EPHEMERA": {
							"メーカー":     "ルビコン調査技研",
							"価格":       "296,000",
							"レギュレーション": "1.03.1",
							"AP":       "2380",
							"耐弾防御":     "219",
							"耐EN防御":    "263",
							"耐爆防御":     "256",
							"腕部積載上限":   "12680",
							"反動制御":     "108 (+10)",
							"射撃武器適性":   "104",
							"近接武器適性":   "106",
							"重量":       "12700",
							"EN負荷":     "312",
						},
						"IB-C03A: HAL 826": {
							"メーカー":     "ルビコン調査技研",
							"価格":       "322,000",
							"レギュレーション": "1.03.1",
							"AP":       "2210",
							"耐弾防御":     "225",
							"耐EN防御":    "248",
							"耐爆防御":     "236",
							"腕部積載上限":   "14000",
							"反動制御":     "125 (+30)",
							"射撃武器適性":   "123",
							"近接武器適性":   "104",
							"重量":       "14160",
							"EN負荷":     "300",
						},
					},
				},
			},
			ErrMsg: "",
		},
	}
	c := crawler.NewArmsFrame()
	t.Run(test.name, func(t *testing.T) {
		results, err := c.Fetch()
		assert.Equal(t, err, nil)
		assert.Equal(t, test.want.Value, results)
	})
}
